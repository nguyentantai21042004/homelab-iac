---
# Playbook: Setup PostgreSQL Server with Docker

- name: Setup PostgreSQL Server
  hosts: postgres_servers
  become: true
  roles:
    - role: kernel-tuning
      vars:
        sysctl_params:
          - { name: "vm.swappiness", value: "10" }
          - { name: "vm.dirty_ratio", value: "15" }
          - { name: "vm.dirty_background_ratio", value: "5" }
    - role: docker
    - role: data-disk
      vars:
        data_mount_point: "{{ pg_data_path }}"
        disk_fstype: xfs
    - role: postgres
